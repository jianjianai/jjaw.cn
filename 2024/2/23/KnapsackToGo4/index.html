<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.13">
    <meta property="og:url" content="https://jjaw.cn/2024/2/23/KnapsackToGo4/"><meta property="og:site_name" content="神奇小破站"><meta property="og:title" content="KnapsackToGo4:强大的跨服数据同步插件第4代。"><meta property="og:description" content="KTG4是基于bukkitAPI的我的世界服务器跨服同步插件，可在多个服务器之间同步玩家数据，支持多种同步方式。以轻松的完成多服务器之间的数据同步。未来将支持minecraft其他服务端Fabric，forge，sponge，Folia。"><meta property="og:type" content="article"><meta property="og:image" content="https://bstats.org/signatures/bukkit/KnapsackToGo4.svg"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-01T04:51:08.000Z"><meta property="article:tag" content="mc插件"><meta property="article:tag" content="mc"><meta property="article:modified_time" content="2024-07-01T04:51:08.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"KnapsackToGo4:强大的跨服数据同步插件第4代。","image":["https://bstats.org/signatures/bukkit/KnapsackToGo4.svg"],"dateModified":"2024-07-01T04:51:08.000Z","author":[]}</script><link rel="icon" type="image/png" href="/favicon.png"><link rel="shortcut icon" href="/favicon.ico"><script>!function(p){"use strict";!function(t){var s=window,e=document,i=p,c="".concat("https:"===e.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=e.createElement("script"),r=e.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({id:"3IG7honw86Ec9yDG",ck:"3IG7honw86Ec9yDG"});</script><title>KnapsackToGo4:强大的跨服数据同步插件第4代。 | 神奇小破站</title><meta name="description" content="KTG4是基于bukkitAPI的我的世界服务器跨服同步插件，可在多个服务器之间同步玩家数据，支持多种同步方式。以轻松的完成多服务器之间的数据同步。未来将支持minecraft其他服务端Fabric，forge，sponge，Folia。">
    <link rel="preload" href="/assets/style-BQ7wX0tI.css" as="style"><link rel="stylesheet" href="/assets/style-BQ7wX0tI.css">
    <link rel="modulepreload" href="/assets/app-DHlauKQu.js"><link rel="modulepreload" href="/assets/index.html-S8mZxDq8.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="app-main" data-v-87e45dc4 data-v-efc7c778><!----><div class="layout" data-v-efc7c778><header class="header" data-v-efc7c778><!--[--><div class="header" data-v-87e45dc4 data-v-fba65658><a class="route-link left" href="/" data-v-fba65658><img src="/assets/logo-BKj6Wk_c.svg" alt="logo" class="logo" data-v-fba65658><span class="logo-f" data-v-fba65658>神奇小破站</span></a><div class="rigt" data-v-fba65658></div></div><!--]--></header><nav class="shwo-menu" data-v-efc7c778><div class="shwo-menu-left" data-v-efc7c778><span class="menu-left-n" data-v-efc7c778><div data-v-efc7c778>&lt;</div></span><span data-v-efc7c778>菜单</span></div><div class="shwo-menu-right" data-v-efc7c778><span data-v-efc7c778>页面导航</span><span class="menu-right-n" data-v-efc7c778><div data-v-efc7c778>&gt;</div></span></div></nav><!--[--><div class="body" data-v-87e45dc4 data-v-dbf77475><!----><main class="main" data-v-dbf77475><!--[--><div class="doc-mian" data-v-87e45dc4 data-v-f65da650><div class="content-box doc-header" data-v-f65da650 data-v-53b80e9d data-v-ed3e2012><!----><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><h1 class="doc-h-h1" data-v-53b80e9d>KnapsackToGo4:强大的跨服数据同步插件第4代。</h1><p class="doc-h-p" data-v-53b80e9d>KTG4是基于bukkitAPI的我的世界服务器跨服同步插件，可在多个服务器之间同步玩家数据，支持多种同步方式。以轻松的完成多服务器之间的数据同步。未来将支持minecraft其他服务端Fabric，forge，sponge，Folia。</p><div class="tags" data-v-53b80e9d><svg fill="currentColor" t="1716535111512" class="icon tag-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2661" width="200" height="200" data-v-53b80e9d><path d="M998.857143 451.2l-33.828572-357.257143c-1.714286-18.514286-16.457143-33.142857-34.971428-34.971428L572.8 25.142857h-0.457143c-3.657143 0-6.514286 1.142857-8.685714 3.314286L28.457143 563.657143a11.382857 11.382857 0 0 0 0 16.114286l415.771428 415.771428c2.171429 2.171429 5.028571 3.314286 8.114286 3.314286s5.942857-1.142857 8.114286-3.314286l535.2-535.2c2.285714-2.4 3.428571-5.714286 3.2-9.142857zM725.714286 369.142857c-40.342857 0-73.142857-32.8-73.142857-73.142857s32.8-73.142857 73.142857-73.142857 73.142857 32.8 73.142857 73.142857-32.8 73.142857-73.142857 73.142857z" p-id="2662"></path></svg><!--[--><a class="route-link tag-n colour-1" href="/tags/mc%E6%8F%92%E4%BB%B6/" data-v-53b80e9d>mc插件</a><a class="route-link tag-n colour-3" href="/tags/mc/" data-v-53b80e9d>mc</a><!--]--></div><!--]--></div></div></div><div class="content-box doc-box doc-content" data-v-f65da650 data-v-959a37ff data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><div class="doc-header" data-v-959a37ff><div class="h-left" data-v-959a37ff><div class="h-left-item" title="发布于 2024-2-23" data-v-959a37ff><svg fill="currentColor" t="1716534513061" class="icon calender-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1518" width="200" height="200" data-v-959a37ff><path d="M902.095238 438.857143v390.095238a73.142857 73.142857 0 0 1-73.142857 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857V438.857143h780.190476z m-512 219.428571h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m-365.714286-146.285714h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857zM195.047619 170.666667h73.142857v121.904762h158.476191V170.666667H609.52381v121.904762h158.47619V170.666667H828.952381a73.142857 73.142857 0 0 1 73.142857 73.142857v121.904762H121.904762v-121.904762a73.142857 73.142857 0 0 1 73.142857-73.142857z m529.212952-48.761905v121.904762h-73.142857V121.904762h73.142857zM380.050286 121.904762v121.904762h-73.142857V121.904762h73.142857z" p-id="1519"></path></svg><span class="calender-t" data-v-959a37ff>2024-2-23</span></div><div class="h-left-item" title="近期更新 6个月前" data-v-959a37ff><svg fill="currentColor" t="1716539022955" class="icon calender-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-959a37ff><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="calender-t" data-v-959a37ff>6个月前</span></div></div><a href="/edit-on-github/?edit=https%3A%2F%2Fgithub.com%2Fjianjianai%2Fjjaw.cn%2Fedit%2Fmaster%2Farticles%2F5-KnapsackToGo4%2FKnapsackToGo4.md&amp;t=KnapsackToGo4%3A%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%B7%A8%E6%9C%8D%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%8F%92%E4%BB%B6%E7%AC%AC4%E4%BB%A3%E3%80%82" class="h-right" data-v-959a37ff><!--[--><svg fill="currentColor" t="1716541843218" class="icon edit-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4659" width="200" height="200" data-v-959a37ff><path d="M652.4 156.6125a112.5 112.5 0 1 1 155.925 161.15625L731.375 394.71875 572.3 235.5875l79.5375-79.5375 0.5625 0.5625zM333.63125 792.40625v0.1125H174.5v-159.1875l358.03125-357.975 159.075 159.13125-357.975 357.91875zM62 849.5h900v112.5H62v-112.5z" fill="#262626" p-id="4660"></path></svg><!--]--></a></div><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><div class="markdown-body" data-v-959a37ff data-v-33dd664d><h1 id="knapsacktogo4" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#knapsacktogo4" data-v-33dd664d><span data-v-33dd664d>KnapsackToGo4</span></a></h1><p data-v-33dd664d>KTG4是基于bukkitAPI的我的世界服务器跨服同步插件，全称KnapsackToGo4。 强大的跨服数据同步插件第4代。 可在多个服务器之间同步玩家数据，支持多种同步方式。 使用KnapsackToGo4可以轻松的完成多服务器之间的数据同步。 未来将支持minecraft其他服务端Fabric，forge，sponge，Folia。</p><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>效果演示</p><div class="demo-body" data-v-62b33fe8><!--[--><div class="lineDiv" data-v-33dd664d><div data-v-33dd664d><img src="/assets/attach-CyJCOgnL.gif" data-v-33dd664d></div><div style="padding:1rem;" data-v-33dd664d><h3 id="knapsacktogo4的演示" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#knapsacktogo4的演示" data-v-33dd664d><span data-v-33dd664d>KnapsackToGo4的演示</span></a></h3><p data-v-33dd664d>使用KnapsackToGo4可以轻松的完成多服务器之间的数据同步。KnapsackToGo4比KnapsackToGo2更稳定，更轻量，解决了死锁的问题，拥有更多同步方式和更强大的扩展性。</p></div></div><!--]--></div></div><h2 id="功能介绍" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#功能介绍" data-v-33dd664d><span data-v-33dd664d>功能介绍</span></a></h2><h3 id="内置数据序列化" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#内置数据序列化" data-v-33dd664d><span data-v-33dd664d>内置数据序列化</span></a></h3><ul data-v-33dd664d><li data-v-33dd664d><h4 id="yaml-默认" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#yaml-默认" data-v-33dd664d><span data-v-33dd664d>yaml (默认)</span></a></h4></li></ul><blockquote data-v-33dd664d><p data-v-33dd664d>bukkit内置的序列化方式，最古老、最稳妥、兼容性最好的方式。几乎所有版本都支持。</p></blockquote><ul class="task-list-container" data-v-33dd664d><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-0" data-v-33dd664d> 物品栏</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-1" data-v-33dd664d> 装备栏</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-2" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-2" data-v-33dd664d> 末影箱</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-3" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-3" data-v-33dd664d> 饱食度</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-4" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-4" data-v-33dd664d> 生命值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-5" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-5" data-v-33dd664d> 最大生命值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-6" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-6" data-v-33dd664d> 进度</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-7" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-7" data-v-33dd664d> 经验值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-8" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-8" data-v-33dd664d> 药水效果</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-9" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-9" data-v-33dd664d> 位置</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-10" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-10" data-v-33dd664d> 成书和书与笔中的特殊字符 （直接报错,bukkil里yaml问题，请反馈给服务端，建议禁用成书和书与笔）</label></li></ul><h3 id="内置的数据存储方式" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#内置的数据存储方式" data-v-33dd664d><span data-v-33dd664d>内置的数据存储方式</span></a></h3><ul data-v-33dd664d><li data-v-33dd664d><h4 id="file-默认" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#file-默认" data-v-33dd664d><span data-v-33dd664d>File (默认)</span></a></h4></li></ul><blockquote data-v-33dd664d><p data-v-33dd664d>使用文件来完成数据同步，需要同步的服务器设置相同文件夹。</p></blockquote><ul data-v-33dd664d><li data-v-33dd664d><h4 id="sqlite" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#sqlite" data-v-33dd664d><span data-v-33dd664d>Sqlite</span></a></h4></li></ul><blockquote data-v-33dd664d><p data-v-33dd664d>使用Sqlite数据库完成同步，Sqlite是一个文件数据库，需要同步的服务器设置同一个.db文件。性能比文件夹好。</p></blockquote><ul data-v-33dd664d><li data-v-33dd664d><h4 id="mysql" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#mysql" data-v-33dd664d><span data-v-33dd664d>Mysql</span></a></h4></li></ul><blockquote data-v-33dd664d><p data-v-33dd664d>使用Mysql数据库完成同步，Mysql是一个网络数据库，需要同步的服务器连接到同一个数据库。</p></blockquote><div class="hint-container important" data-v-33dd664d><p class="hint-container-title" data-v-33dd664d>提醒</p><p data-v-33dd664d>使用Mysql同步数据，如果玩家数量很多，需要自己使用数据库管理软件立索引，否则会性能降低。</p></div><h3 id="knapsacktogo4通过扩展可以支持mod数据同步" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#knapsacktogo4通过扩展可以支持mod数据同步" data-v-33dd664d><span data-v-33dd664d>KnapsackToGo4通过扩展可以支持MOD数据同步</span></a></h3><h4 id="ktg4作者编写的扩展下载列表" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#ktg4作者编写的扩展下载列表" data-v-33dd664d><span data-v-33dd664d>ktg4作者编写的扩展下载列表</span></a></h4><p data-v-33dd664d><a href="https://gitee.com/jja8/KnapsackToGo4Plugin/" target="_blank" rel="noopener noreferrer" data-v-33dd664d>KnapsackToGo4Plugin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><h4 id="nmsserialize" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#nmsserialize" data-v-33dd664d><span data-v-33dd664d>NMSserialize</span></a></h4><p data-v-33dd664d>NMSserialize是KnapsackToGo4的数据序列化扩展， NMSserialize主要是针对MOD服务器开发的，目前只提供1.12.2，1.16.5和1.18.2这几个MOD较多的版本。</p><h5 id="支持情况" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#支持情况" data-v-33dd664d><span data-v-33dd664d>支持情况</span></a></h5><ul class="task-list-container" data-v-33dd664d><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-11" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-11" data-v-33dd664d> 物品栏</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-12" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-12" data-v-33dd664d> 装备栏</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-13" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-13" data-v-33dd664d> 末影箱</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-14" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-14" data-v-33dd664d> 饱食度</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-15" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-15" data-v-33dd664d> 生命值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-16" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-16" data-v-33dd664d> 最大生命值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-17" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-17" data-v-33dd664d> 进度</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-18" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-18" data-v-33dd664d> 经验值</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-19" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-19" data-v-33dd664d> 药水效果</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-20" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-20" data-v-33dd664d> 位置</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-21" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-21" data-v-33dd664d> 统计数据</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-22" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-22" data-v-33dd664d> 成书和书与笔中的特殊字符</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-23" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-23" data-v-33dd664d> 玩家对象上的自定义数据 (mod和插件数据)</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-24" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-24" data-v-33dd664d> 特殊物品</label></li><li class="task-list-item" data-v-33dd664d><input type="checkbox" class="task-list-item-checkbox" id="task-item-25" checked="checked" disabled="disabled" data-v-33dd664d><label class="task-list-item-label" for="task-item-25" data-v-33dd664d> 饰品栏</label></li></ul><p data-v-33dd664d>以上是已知，全部完美同步列表。</p><div class="hint-container tip" data-v-33dd664d><p class="hint-container-title" data-v-33dd664d>小知识</p><p data-v-33dd664d>NMSserialize使用，NMS序列化，直接调用核心序列化玩家数据，可以完美存储几乎所有的数据包括MOD的数据。缺点是必须同步全部数据。</p></div><div class="hint-container important" data-v-33dd664d><p class="hint-container-title" data-v-33dd664d>提醒</p><p data-v-33dd664d>如果的服务端是纯净服务端不推荐使用NMSserialize，NMSserialize更新较慢，当你要升级服务器到最新版本时NMSserialize可能还没更新。</p></div><h3 id="knapsacktogo4如何保证数据安全" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#knapsacktogo4如何保证数据安全" data-v-33dd664d><span data-v-33dd664d>KnapsackToGo4如何保证数据安全</span></a></h3><p data-v-33dd664d>KnapsackToGo4使用的独占锁的方式，当玩家在一个服务器中的时其他服务器无法读取。</p><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>效果演示</p><div class="demo-body" data-v-62b33fe8><!--[--><p data-v-33dd664d><img src="/assets/2-C4hPZRZk.gif" alt="Alt text" loading="lazy" data-v-33dd664d></p><!--]--></div></div><h3 id="为什么写这款插件" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#为什么写这款插件" data-v-33dd664d><span data-v-33dd664d>为什么写这款插件</span></a></h3><blockquote data-v-33dd664d><p data-v-33dd664d>KnapsackToGo2插件已经有很多服务器在使用了，并且功能也挺完善。 但是仍然存在一些问题，例如：服务器崩溃后玩家再次进入服务器就需要等待许久。 我自己对KnapsackToGo2也是不意的， 在开发完KnapsackToGo2之后我又继续开发了许多插件，也学习到了很多编程经验，我感觉我的编程技术有了很大的进步。 在总结了前几代插件的毛病和逻辑上的问题后，我想到了种新的方案。于是我决定重新编写了一个更好的KnapsackToGo4。 这次全新的KnapsackToGo4是在总结了前面所有经验后完全重新编写的，运行逻辑也是最合理符合直觉的。</p></blockquote><blockquote data-v-33dd664d><p data-v-33dd664d>ps： 为什么新一代叫KnapsackToGo4而不是KnapsackToGo3呢? 因为KnapsackToGo3在很久之前就写完了，但是因为问题太多所以就弃坑了。</p></blockquote><h2 id="下载订阅" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#下载订阅" data-v-33dd664d><span data-v-33dd664d>下载订阅</span></a></h2><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>插件实验室交流频道</p><div class="demo-body" data-v-62b33fe8><!--[--><div class="lineDiv" data-v-33dd664d><div data-v-33dd664d><img src="/assets/3-CUqq2mE6.webp" data-v-33dd664d></div><div style="padding:1rem;" data-v-33dd664d><h3 id="plugclub-插件实验室" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#plugclub-插件实验室" data-v-33dd664d><span data-v-33dd664d>PlugClub / 插件实验室</span></a></h3><p data-v-33dd664d>加入我们的插件社区，交流和插件的使用方法，反馈遇到的问题，获得最新动态。</p><p data-v-33dd664d>qq群：820131534 (已满)</p><p data-v-33dd664d>因为qq群满了，所以现在有了qq频道: <a href="https://pd.qq.com/s/113phvpau" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://pd.qq.com/s/113phvpau<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div></div><!--]--></div></div><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>gitee开源社区</p><div class="demo-body" data-v-62b33fe8><!--[--><div class="lineDiv" data-v-33dd664d><div data-v-33dd664d><img src="https://gitee.com/static/images/logo-black.svg" data-v-33dd664d></div><div style="padding:1rem;" data-v-33dd664d><h3 id="gitee开源社区" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#gitee开源社区" data-v-33dd664d><span data-v-33dd664d>gitee开源社区</span></a></h3><p data-v-33dd664d>在发行版中下载最新版插件：<a href="https://gitee.com/jja8/KnapsackToGo4/releases" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://gitee.com/jja8/KnapsackToGo4/releases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p data-v-33dd664d>提交issues，反馈使用中遇到的问题：<a href="https://gitee.com/jja8/KnapsackToGo4/issues" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://gitee.com/jja8/KnapsackToGo4/issues<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div></div><!--]--></div></div><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>github开源社区</p><div class="demo-body" data-v-62b33fe8><!--[--><div class="lineDiv" data-v-33dd664d><div data-v-33dd664d><svg aria-hidden="true" viewBox="0 0 16 16" version="1.1" width="100%" data-view-component="true" class="octicon octicon-mark-github v-align-middle color-fg-default" data-v-33dd664d><path d="M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z" data-v-33dd664d></path></svg></div><div style="padding:1rem;" data-v-33dd664d><h3 id="github开源社区" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#github开源社区" data-v-33dd664d><span data-v-33dd664d>github开源社区</span></a></h3><p data-v-33dd664d>在发行版中下载最新版插件：<a href="https://github.com/jianjianai/KnapsackToGo4/releases" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://github.com/jianjianai/KnapsackToGo4/releases<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p><p data-v-33dd664d>提交issues，反馈使用中遇到的问题：<a href="https://github.com/jianjianai/KnapsackToGo4/issues" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://github.com/jianjianai/KnapsackToGo4/issues<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div></div><!--]--></div></div><div class="demo" data-v-33dd664d data-v-62b33fe8><p class="title" data-v-62b33fe8>spigot</p><div class="demo-body" data-v-62b33fe8><!--[--><div class="lineDiv" data-v-33dd664d><div data-v-33dd664d><img src="https://static.spigotmc.org/img/spigot.png" data-v-33dd664d></div><div style="padding:1rem;" data-v-33dd664d><h3 id="spigot" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#spigot" data-v-33dd664d><span data-v-33dd664d>spigot</span></a></h3><p data-v-33dd664d>在spigot上下载：<a href="https://www.spigotmc.org/resources/knapsacktogo4-powerful-cross-server-data-synchronization-plug-in-generation-4.102493/" target="_blank" rel="noopener noreferrer" data-v-33dd664d>https://www.spigotmc.org/resources/knapsacktogo4-powerful-cross-server-data-synchronization-plug-in-generation-4.102493/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">在新窗口打开</span></span></a></p></div></div><!--]--></div></div><h2 id="统计" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#统计" data-v-33dd664d><span data-v-33dd664d>统计</span></a></h2><p data-v-33dd664d><img src="https://bstats.org/signatures/bukkit/KnapsackToGo4.svg" alt="统计" loading="lazy" data-v-33dd664d></p><h2 id="详细教程" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#详细教程" data-v-33dd664d><span data-v-33dd664d>详细教程</span></a></h2><h3 id="快速完成配置" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#快速完成配置" data-v-33dd664d><span data-v-33dd664d>快速完成配置</span></a></h3><p data-v-33dd664d>首先下载最新版KnapsackToGo4放到服务器的plugins文件夹，启动服务器，插件会在plugins文件夹下的KnapsackToGo4目录中创建默认配置。之后关闭服务器，打开KnapsackToGo4文件夹。 <img src="/assets/5-ChdkNRqc.webp" alt="Alt text" loading="lazy" data-v-33dd664d></p><h4 id="配置数据容器-同步方式" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#配置数据容器-同步方式" data-v-33dd664d><span data-v-33dd664d>配置数据容器（同步方式）</span></a></h4><p data-v-33dd664d>数据容器是存储数据的方式。用来存数据。比如记录文字可以用纸和笔，也可以用电脑或手机，还可以刻在石头上。 在这里可以配置数据用什么方式来存储，插件内置了3种数据容器，分别是 <code data-v-33dd664d>File</code>,<code data-v-33dd664d>Sqlite</code>,<code data-v-33dd664d>Mysql</code>。</p><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-335-0" aria-selected="true">File</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-335-1" aria-selected="false">Sqlite</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-335-2" aria-selected="false">Mysql</button></div><!--[--><div class="vp-tab active" id="tab-335-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">File</div><!--[--><p data-v-33dd664d>使用文件来完成数据同步，需要同步的服务器设置相同文件夹。</p><!--]--></div><div class="vp-tab" id="tab-335-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Sqlite</div><!--[--><p data-v-33dd664d>使用Sqlite数据库完成同步，Sqlite是一个文件数据库，需要同步的服务器设置同一个.db文件。性能比文件夹好。</p><!--]--></div><div class="vp-tab" id="tab-335-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Mysql</div><!--[--><p data-v-33dd664d>使用Mysql数据库完成同步，Mysql是一个网络数据库，需要同步的服务器连接到同一个数据库。</p><!--]--></div><!--]--></div><h5 id="_1-修改playerdatacase-yaml" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#_1-修改playerdatacase-yaml" data-v-33dd664d><span data-v-33dd664d>1.修改PlayerDataCase.yaml</span></a></h5><p data-v-33dd664d>修改<code data-v-33dd664d>PlayerDataCase.yml</code>文件来配置数据同步方式。</p><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-358-0" aria-selected="true">File</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-358-1" aria-selected="false">Sqlite</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-358-2" aria-selected="false">Mysql</button></div><!--[--><div class="vp-tab active" id="tab-358-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">File</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>PlayerDataCase.yml</strong></p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml" data-v-33dd664d><pre class="language-yaml" data-v-33dd664d><code data-v-33dd664d><span class="line" data-v-33dd664d><span class="token key atrule" data-v-33dd664d>playerDataCaseType</span><span class="token punctuation" data-v-33dd664d>:</span> File</span>
<span class="line" data-v-33dd664d></span>
<span class="line" data-v-33dd664d></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-358-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Sqlite</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>PlayerDataCase.yml</strong></p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml" data-v-33dd664d><pre class="language-yaml" data-v-33dd664d><code data-v-33dd664d><span class="line" data-v-33dd664d><span class="token key atrule" data-v-33dd664d>playerDataCaseType</span><span class="token punctuation" data-v-33dd664d>:</span> Sqlite</span>
<span class="line" data-v-33dd664d></span>
<span class="line" data-v-33dd664d></span></code></pre></div><!--]--></div><div class="vp-tab" id="tab-358-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Mysql</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>PlayerDataCase.yml</strong></p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml" data-v-33dd664d><pre class="language-yaml" data-v-33dd664d><code data-v-33dd664d><span class="line" data-v-33dd664d><span class="token key atrule" data-v-33dd664d>playerDataCaseType</span><span class="token punctuation" data-v-33dd664d>:</span> Mysql</span>
<span class="line" data-v-33dd664d></span>
<span class="line" data-v-33dd664d></span></code></pre></div><!--]--></div><!--]--></div><p data-v-33dd664d>之后重启一下服务器，插件会自动释放对应数据容器的默认配置文件。</p><h5 id="_2-修改对应容器的配置文件" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#_2-修改对应容器的配置文件" data-v-33dd664d><span data-v-33dd664d>2.修改对应容器的配置文件</span></a></h5><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-384-0" aria-selected="true">File</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-384-1" aria-selected="false">Sqlite</button><button type="button" class="vp-tab-nav" role="tab" aria-controls="tab-384-2" aria-selected="false">Mysql</button></div><!--[--><div class="vp-tab active" id="tab-384-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">File</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>FileDataCaseSetUp.yml</strong></p><pre class="language-yaml" data-v-33dd664d>file: C://knapsackToGo4/player
serverName: server1

</pre><p data-v-33dd664d>调整配置:</p><table style="width:100%;" data-v-33dd664d><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>服务器名称：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="server1" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>文件夹位置：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="C://knapsackToGo4/player" data-v-33dd664d></td></tr></table><p data-v-33dd664d></p><!--]--></div><div class="vp-tab" id="tab-384-1" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Sqlite</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>SqliteDataCaseSetUp.yml</strong></p><pre class="language-yaml" data-v-33dd664d>PassWord: password
dataBaseURL: jdbc:sqlite:C://knapsackToGo4/playerData.db
holdLockTime: 30000
serverName: server1
userName: root

</pre><p data-v-33dd664d>调整配置:</p><table style="width:100%;" data-v-33dd664d><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>服务器名称：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="server1" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>文件位置：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="C://knapsackToGo4/playerData.db" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>用户名：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="root" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>密码：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="password" data-v-33dd664d></td></tr></table><!--]--></div><div class="vp-tab" id="tab-384-2" role="tabpanel" aria-expanded="false"><div class="vp-tab-title">Mysql</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>PlayerDataCase.yml</strong></p><pre class="language-yaml" data-v-33dd664d>PassWord: password
dataBaseURL: jdbc:mysql://127.0.0.1/KnapsackToGo4
holdLockTime: 30000
serverName: server1
userName: root

</pre><p data-v-33dd664d>调整配置:</p><table style="width:100%;" data-v-33dd664d><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>服务器名称：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="server1" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>数据库地址：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="127.0.0.1" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>数据库名称：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="KnapsackToGo4" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>用户名：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="root" data-v-33dd664d></td></tr><tr style="display:flex;" data-v-33dd664d><td data-v-33dd664d>密码：</td><td style="flex:1;" data-v-33dd664d><input type="text" style="width:100%;" value="password" data-v-33dd664d></td></tr></table><!--]--></div><!--]--></div><p data-v-33dd664d>完成配置后重启服务器，如果配置正确，那么插件不会有任何报错，之后将配置文件复制到其他需要同步的服务器上就可以啦！</p><div class="hint-container tip" data-v-33dd664d><p class="hint-container-title" data-v-33dd664d>提示 关于serverName</p><p data-v-33dd664d><code data-v-33dd664d>serverName(服务器名称)</code>建议每个服务器都不相同，当然都相同也不会影响插件正常运行，但是当需要查看日志的时候会分不清服务器。</p></div><div class="hint-container tip" data-v-33dd664d><p class="hint-container-title" data-v-33dd664d>提示 配置文件太多分不清</p><p data-v-33dd664d>配置文件夹中有很多文件其实都是无用配置文件，如果你使用Mysql那么FileDataCaseSetUp.yml和SqliteDataCaseSetUp.yml就可以删掉啦！只用管MysqlDataCaseSetUp.yml就可以了，插件也不会自动生成不需要的配置文件。</p></div><h4 id="配置序列化方法-数据的表达方式" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#配置序列化方法-数据的表达方式" data-v-33dd664d><span data-v-33dd664d>配置序列化方法（数据的表达方式）</span></a></h4><p data-v-33dd664d>序列化方法是数据的表达方式，比如你可以用汉语表达信息，也可以用英语表达信息。 目前插件只内置一种序列化方法<code data-v-33dd664d>Yaml</code>，所以一般无需配置，保持默认即可。</p><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-438-0" aria-selected="true">Yaml</button></div><!--[--><div class="vp-tab active" id="tab-438-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Yaml</div><!--[--><p data-v-33dd664d>Yaml是bukkit内置的序列化方式，最古老、最稳妥、兼容性最好的方式。几乎所有版本都支持。</p><!--]--></div><!--]--></div><h5 id="_1-修改playerdataserialize-yml" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#_1-修改playerdataserialize-yml" data-v-33dd664d><span data-v-33dd664d>1.修改PlayerDataSerialize.yml</span></a></h5><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-448-0" aria-selected="true">Yaml</button></div><!--[--><div class="vp-tab active" id="tab-448-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Yaml</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>PlayerDataSerialize.yml</strong></p><div class="language-yaml" data-highlighter="prismjs" data-ext="yml" data-title="yml" data-v-33dd664d><pre class="language-yaml" data-v-33dd664d><code data-v-33dd664d><span class="line" data-v-33dd664d><span class="token key atrule" data-v-33dd664d>playerDataSerializeType</span><span class="token punctuation" data-v-33dd664d>:</span> Yaml</span>
<span class="line" data-v-33dd664d></span>
<span class="line" data-v-33dd664d></span></code></pre></div><!--]--></div><!--]--></div><p data-v-33dd664d>之后重启服务器，插件会自动生成对应的序列化方法配置文件。</p><div class="vp-tabs" data-v-33dd664d><div class="vp-tabs-nav" role="tablist"><button type="button" class="vp-tab-nav active" role="tab" aria-controls="tab-459-0" aria-selected="true">Yaml</button></div><!--[--><div class="vp-tab active" id="tab-459-0" role="tabpanel" aria-expanded="true"><div class="vp-tab-title">Yaml</div><!--[--><p data-v-33dd664d>修改：<strong data-v-33dd664d>YamlDataSerializeSetUp.yml</strong></p><pre class="language-yaml" data-v-33dd664d>AdvancementProgress: false
EnderChest: true
Experience: true
FoodLevel: true
Health: true
Inventory: true
Location: false
MaxHealth: true
PotionEffects: true

</pre><p data-v-33dd664d><strong data-v-33dd664d>打开或关闭同步功能（一件修改上方配置文件）</strong></p><table data-v-33dd664d><tr data-v-33dd664d><td data-v-33dd664d>物品栏</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>末影箱</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>经验值</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>饱食度</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>生命值</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>最大生命值</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>药水效果</td><td data-v-33dd664d><input type="checkbox" checked data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>进度</td><td data-v-33dd664d><input type="checkbox" data-v-33dd664d></td></tr><tr data-v-33dd664d><td data-v-33dd664d>位置</td><td data-v-33dd664d><input type="checkbox" data-v-33dd664d></td></tr></table><!--]--></div><!--]--></div><p data-v-33dd664d>之后将配置文件复制到全部服务器，重启后即可应用设置。</p><h3 id="插件工作原理" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#插件工作原理" data-v-33dd664d><span data-v-33dd664d>插件工作原理</span></a></h3><p data-v-33dd664d>以后再更新吧...</p><h3 id="开发者api" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#开发者api" data-v-33dd664d><span data-v-33dd664d>开发者API</span></a></h3><p data-v-33dd664d>以后再更新吧...</p><h2 id="常见问题解答" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#常见问题解答" data-v-33dd664d><span data-v-33dd664d>常见问题解答</span></a></h2><h3 id="一直显示数据似乎出错了-请联系管理员恢复数据" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#一直显示数据似乎出错了-请联系管理员恢复数据" data-v-33dd664d><span data-v-33dd664d>一直显示数据似乎出错了,请联系管理员恢复数据</span></a></h3><p data-v-33dd664d>isDataError: 数据似乎出错了,请联系管理员恢复数据..&lt;数&gt;</p><h4 id="产生原因" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#产生原因" data-v-33dd664d><span data-v-33dd664d>产生原因</span></a></h4><p data-v-33dd664d>玩家存储在数据库中的数据损坏了。</p><h4 id="解决方法" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#解决方法" data-v-33dd664d><span data-v-33dd664d>解决方法</span></a></h4><p data-v-33dd664d>如果有备份数据库可以还原之前的备份，如果没有备份可以使用命令CancelError，放弃数据库中的数据，使用当前服务器的旧数据。</p><p data-v-33dd664d>让玩家进入最后一次退出的服务器然后使用CancelError命令，可以保证数据不会丢失或回档。</p><h3 id="一直显示正在加载数据-并且读数。" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#一直显示正在加载数据-并且读数。" data-v-33dd664d><span data-v-33dd664d>一直显示正在加载数据，并且读数。</span></a></h3><p data-v-33dd664d>2022.07.19.0949版本之前提示消息是：正在加载你的数据,请稍等...</p><p data-v-33dd664d>2022.07.19.0949版本之后提示消息是：等待其他服务器保存数据...</p><h4 id="产生原因-1" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#产生原因-1" data-v-33dd664d><span data-v-33dd664d>产生原因</span></a></h4><p data-v-33dd664d>为了保证数据安全，一个玩家的数据在同一时间只允许被一个服务器加载。 服务器在加载数据之后会给这个数据打上一个标记， 当其他服务器读取这个数据的时候如果发现存在这个标记就会等待， 直到标记被清除后才会读取。</p><h4 id="解决方法-1" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#解决方法-1" data-v-33dd664d><span data-v-33dd664d>解决方法</span></a></h4><p data-v-33dd664d>这个问题通常只有在保存数据时发生错误才会产生，如果是使用文件，或者是sqlite这种本地数据库，发生概率非常小。 就算是使用mysql只要网络连接良好，通常也不会产生此问题。</p><p data-v-33dd664d><strong data-v-33dd664d>如果你的服务器上发生了此问题，请一定要保留日志并提交给我。在后续的更新中或许此问题将不会存在了。</strong></p><p data-v-33dd664d>注意：在处理问题之前需要先确认玩家是否同登录两个相同的账号连接不同的两个服务器，如果是这种情况，那就是正常的无需处理。</p><h5 id="使用file数据容器的解决方法" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#使用file数据容器的解决方法" data-v-33dd664d><span data-v-33dd664d>使用file数据容器的解决方法</span></a></h5><p data-v-33dd664d>file数据容器，是使用操作系统的文件锁。在数据被锁时会生成两个锁文件，分别是&lt;玩家uuid&gt;.lock,&lt;玩家uuid&gt;.lock.inf.</p><p data-v-33dd664d>&lt;玩家uuid&gt;.lock是锁标记文件</p><p data-v-33dd664d>&lt;玩家uuid&gt;.lock.inf是锁信息</p><p data-v-33dd664d>如果你在FileDataCaseSetUp.yaml中设置了每个服务器的serverName那么排查起来就相当方便了。 你可以用记事本打开&lt;玩家uuid&gt;.lock.inf就可以看到是哪个服务器锁定了这个玩家数据，只需重启这个服务器即可。 如果你所有服务器都是默认值null那么请重启所有服务器吧！</p><h5 id="使用mysql或者sqlite数据库的解决方法" tabindex="-1" data-v-33dd664d><a class="header-anchor" href="#使用mysql或者sqlite数据库的解决方法" data-v-33dd664d><span data-v-33dd664d>使用mysql或者sqlite数据库的解决方法</span></a></h5><p data-v-33dd664d>数据库使用的是关系方式加锁，数据库中有两个表分别是playerdata和lockserver。</p><p data-v-33dd664d>服务器会在启动时在lockserver里添加一条随机的LockUUID，关闭时删除这条LockUUID。如果你发现lockserver中的信息条数多于在线服务器数量，那么说明你服务器非正常关闭了，导致锁残留在表里。你可以在所有服务器都关闭的情况下清空这个表。</p><p data-v-33dd664d>lockserver中的LockToTime是锁到期时间，在线的服务器会在到期之前自动续期。如果时间到期就会认为此锁已经失效。</p><p data-v-33dd664d>playerdata的LockUUID是指向lockserver的LockUUID的，如下图所示。 <img src="/assets/4-CDaTsOfX.webp" alt="playerdata的LockUUID是指向lockserver的LockUUID" loading="lazy" data-v-33dd664d></p><p data-v-33dd664d>如果你在mysqlCaseSetUp.yaml中或sqliteCaseSetUp.yaml设置了每个服务器的serverName那么，这样就可以找到玩家是被什么服务器锁了。</p><p data-v-33dd664d>如果确定了这个玩家没有在这个服务器中，只用修改这个玩家的LockUUID为”NULL“即可为这个玩家解锁。或者重启持有这个玩家锁的服务器。</p></div><!--]--></div></div></div></div><div class="content-box comment-box comment" data-v-87e45dc4 data-v-33d62412 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><span style="font-weight:bolder;" data-v-33d62412>评论区</span><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><!----><!--]--></div></div></div><!--]--></main><aside class="aside" data-v-dbf77475><!--[--><div class="aside" data-v-87e45dc4 data-v-09d135a9><div class="content-box aside-befr" data-v-09d135a9 data-v-3d2fc059 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><span style="font-weight:bolder;" data-v-3d2fc059>文章贡献者</span><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><div class="contributors" data-v-3d2fc059><!--[--><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>j</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>jjaw</span><span class="c-l1-email" data-v-3d2fc059>jjaw@jjaw.cn</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>7次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>简</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>简简aw</span><span class="c-l1-email" data-v-3d2fc059>2801819967@qq.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>3次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>p</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>panpanaw</span><span class="c-l1-email" data-v-3d2fc059>131033097+panpanaw@users.noreply.github.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><!--]--><a href="/edit-on-github/?edit=https%3A%2F%2Fgithub.com%2Fjianjianai%2Fjjaw.cn%2Fedit%2Fmaster%2Farticles%2F5-KnapsackToGo4%2FKnapsackToGo4.md&amp;t=KnapsackToGo4%3A%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%B7%A8%E6%9C%8D%E6%95%B0%E6%8D%AE%E5%90%8C%E6%AD%A5%E6%8F%92%E4%BB%B6%E7%AC%AC4%E4%BB%A3%E3%80%82" class="to-edit" data-v-3d2fc059><!--[-->+ 成为贡献者<!--]--></a></div><!--]--></div></div></div><div class="content-box sticky-content-box" data-v-09d135a9 data-v-8273a297 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><!--[--><span style="font-weight:bolder;">页面导航</span><!--]--><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><!--[--><nav class="vuepress-toc aside-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#knapsacktogo4的演示" arialabel="KnapsackToGo4的演示">KnapsackToGo4的演示</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#功能介绍" arialabel="功能介绍">功能介绍</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#内置数据序列化" arialabel="内置数据序列化">内置数据序列化</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#内置的数据存储方式" arialabel="内置的数据存储方式">内置的数据存储方式</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#knapsacktogo4通过扩展可以支持mod数据同步" arialabel="KnapsackToGo4通过扩展可以支持MOD数据同步">KnapsackToGo4通过扩展可以支持MOD数据同步</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#knapsacktogo4如何保证数据安全" arialabel="KnapsackToGo4如何保证数据安全">KnapsackToGo4如何保证数据安全</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#为什么写这款插件" arialabel="为什么写这款插件">为什么写这款插件</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#下载订阅" arialabel="下载订阅">下载订阅</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#plugclub-插件实验室" arialabel="PlugClub / 插件实验室">PlugClub / 插件实验室</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#gitee开源社区" arialabel="gitee开源社区">gitee开源社区</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#github开源社区" arialabel="github开源社区">github开源社区</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#spigot" arialabel="spigot">spigot</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#统计" arialabel="统计">统计</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#详细教程" arialabel="详细教程">详细教程</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#快速完成配置" arialabel="快速完成配置">快速完成配置</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#插件工作原理" arialabel="插件工作原理">插件工作原理</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#开发者api" arialabel="开发者API">开发者API</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#常见问题解答" arialabel="常见问题解答">常见问题解答</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#一直显示数据似乎出错了-请联系管理员恢复数据" arialabel="一直显示数据似乎出错了,请联系管理员恢复数据">一直显示数据似乎出错了,请联系管理员恢复数据</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#一直显示正在加载数据-并且读数。" arialabel="一直显示正在加载数据，并且读数。">一直显示正在加载数据，并且读数。</a><!--[--><!--]--></li></ul><!--]--></li></ul></nav><!--]--><!--]--></div></div></div></div><!--]--></aside></div><!--]--><footer class="footer" data-v-efc7c778><!--[--><div class="footer" data-v-87e45dc4 data-v-7fb9e336><div data-v-7fb9e336><img src="/assets/logo-BKj6Wk_c.svg" style="height:2rem;" data-v-7fb9e336></div><div data-v-7fb9e336><a href="/" class="" data-v-7fb9e336>神奇小破站 jjaw.cn</a></div><div data-v-7fb9e336>图标真是随手画的</div><div data-v-7fb9e336><a href="https://icp.gov.moe/?keyword=20250060" target="_blank" data-v-7fb9e336>萌ICP备20250060号</a></div></div><!--]--></footer></div></div><!--[--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DHlauKQu.js" defer></script>
  </body>
</html>
