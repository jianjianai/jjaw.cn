<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.13">
    <meta property="og:url" content="https://jjaw.cn/git/ts-book/docs/typings/typeCompatibility.html"><meta property="og:site_name" content="神奇小破站"><meta property="og:title" content="类型兼容性"><meta property="og:description" content="类型兼容性 类型兼容性用于确定一个类型是否能赋值给其他类型。 如 string 类型与 number 类型不兼容： 安全性 TypeScript 类型系统设计比较方便，它允许你有一些不正确的行为。例如：任何类型都能被赋值给 any，这意味着告诉编译器你可以做任何你想做的事情： 结构化 TypeScript 对象是一种结构类型，这意味着只要结构匹配，名称..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-12-27T09:13:45.000Z"><meta property="article:modified_time" content="2020-12-27T09:13:45.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"类型兼容性","image":[""],"dateModified":"2020-12-27T09:13:45.000Z","author":[]}</script><link rel="icon" type="image/png" href="/favicon.png"><link rel="shortcut icon" href="/favicon.ico"><script>!function(p){"use strict";!function(t){var s=window,e=document,i=p,c="".concat("https:"===e.location.protocol?"https://":"http://","sdk.51.la/js-sdk-pro.min.js"),n=e.createElement("script"),r=e.getElementsByTagName("script")[0];n.type="text/javascript",n.setAttribute("charset","UTF-8"),n.async=!0,n.src=c,n.id="LA_COLLECT",i.d=n;var o=function(){s.LA.ids.push(i)};s.LA?s.LA.ids&&o():(s.LA=p,s.LA.ids=[],o()),r.parentNode.insertBefore(n,r)}()}({id:"3IG7honw86Ec9yDG",ck:"3IG7honw86Ec9yDG"});</script><title>类型兼容性 | 神奇小破站</title><meta name="description" content="类型兼容性 类型兼容性用于确定一个类型是否能赋值给其他类型。 如 string 类型与 number 类型不兼容： 安全性 TypeScript 类型系统设计比较方便，它允许你有一些不正确的行为。例如：任何类型都能被赋值给 any，这意味着告诉编译器你可以做任何你想做的事情： 结构化 TypeScript 对象是一种结构类型，这意味着只要结构匹配，名称...">
    <link rel="preload" href="/assets/style-DZ-fnuk0.css" as="style"><link rel="stylesheet" href="/assets/style-DZ-fnuk0.css">
    <link rel="modulepreload" href="/assets/app-BvbaUvch.js"><link rel="modulepreload" href="/assets/typeCompatibility.html-DQJpPGop.js">
    
  </head>
  <body>
    <div id="app"><!--[--><div class="app-main" data-v-87e45dc4 data-v-efc7c778><!----><div class="layout" data-v-efc7c778><header class="header" data-v-efc7c778><!--[--><div class="header" data-v-87e45dc4 data-v-fba65658><a class="route-link left" href="/" data-v-fba65658><img src="/assets/logo-BKj6Wk_c.svg" alt="logo" class="logo" data-v-fba65658><span class="logo-f" data-v-fba65658>神奇小破站</span></a><div class="rigt" data-v-fba65658></div></div><!--]--></header><nav class="shwo-menu" data-v-efc7c778><div class="shwo-menu-left" data-v-efc7c778><span class="menu-left-n" data-v-efc7c778><div data-v-efc7c778>&lt;</div></span><span data-v-efc7c778>菜单</span></div><div class="shwo-menu-right" data-v-efc7c778><span data-v-efc7c778>页面导航</span><span class="menu-right-n" data-v-efc7c778><div data-v-efc7c778>&gt;</div></span></div></nav><!--[--><div class="body" data-v-87e45dc4 data-v-dbf77475><nav class="nav" data-v-dbf77475><!--[--><div class="nav" data-v-87e45dc4 data-v-2bdd8684><div class="content-box sticky-content-box nav-box" data-v-2bdd8684 data-v-8273a297 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><!--[--><span style="font-weight:bolder;">文章导航</span><!--]--><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><!--[--><div class="nav-toc"><ul><!--[--><li><a class="route-link" href="#">写在前面</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/">深入理解 TypeScript</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript 项目</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/project/compilationContext.html">编译上下文</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/project/declarationspaces.html">声明空间</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/project/modules.html">模块</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/project/namespaces.html">命名空间</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/project/dynamicImportExpressions.html">动态导入表达式</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript 类型系统</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/typings/overview.html">概览</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/migrating.html">从 JavaScript 迁移</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/types.html">@types</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/ambient.html">环境声明</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/interfaces.html">接口</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/enums.html">枚举</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/lib.html">lib.d.ts</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/functions.html">函数</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/callable.html">可调用的</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/typeAssertion.html">类型断言</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/freshness.html">Freshness</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/typeGuard.html">类型保护</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/literals.html">字面量类型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/readonly.html">readonly</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/generices.html">泛型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/typeInference.html">类型推断</a><!----></li><li><a class="route-link active" href="/git/ts-book/docs/typings/typeCompatibility.html">类型兼容性</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/neverType.html">Never</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/discrominatedUnion.html">辨析联合类型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/indexSignatures.html">索引签名</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/movingTypes.html">流动的类型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/exceptionsHanding.html">异常处理</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/mixins.html">混合</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/typings/thisType.html">ThisType</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">JSX</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/jsx/support.html">支持 JSX</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/jsx/reactJSX.html">React JSX</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/jsx/nonReactJSX.html">非 React JSX</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript 错误提示</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/error/interpreting.html">解读 Errors</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/error/common.html">常见的 Error</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TIPs</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/tips/stringBasedEmuns.html">基于字符串的枚举</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/nominalTyping.html">名义化类型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/statefulFunctions.html">状态函数</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/bind.html">Bind 是有害的</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/curry.html">柯里化</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/typeInstantiation.html">泛型的实例化类型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/lazyObjectLiteralInitialization.html">对象字面量的惰性初始化</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/classAreUseful.html">类是有用的</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/avoidExportDefault.html">export default 被认为是有害的</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/limitPropertySetters.html">减少 setter 属性的使用</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/createArrays.html">创建数组</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/outFileCaution.html">谨慎使用 --outFile</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/staticConstructors.html">TypeScript 中的静态构造函数</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/singletonPatern.html">单例模式</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/functionParameters.html">函数参数</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/truthy.html">Truthy</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/buildToggles.html">构建切换</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/typesafeEventEmitter.html">类型安全的 Event Emitter</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/metadata.html">Reflect Metadata</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/covarianceAndContravariance.html">协变与逆变</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/tips/infer.html">infer</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript 编译原理</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/compiler/overview.html">概览</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/program.html">程序</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/ast.html">抽象语法树</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/scanner.html">扫描器</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/parser.html">解析器</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/binder.html">绑定器</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/checker.html">检查器</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/compiler/emitter.html">发射器</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript FAQs</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/faqs/common-bug-not-bugs.html">一些常见的「bug」并不是 bug</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/common-feature-request.html">一些常见的 Feature 需求</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/type-system-behavior.html">类型系统的行为</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/function.html">函数</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/class.html">类</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/generics.html">泛型</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/modules.html">模块</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/enums.html">枚举</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/type-guards.html">类型守卫</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/jsx-and-react.html">JSX 和 React</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/thing-that-dont-work.html">一些不能按预期工作的代码</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/commandline-behavior.html">命令行的行为</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/faqs/tsconfig-behavior.html">tsconfig.json 的行为</a><!----></li><!--]--></ul></li><li><a class="route-link" href="#">TypeScript 更新</a><ul><!--[--><li><a class="route-link" href="/git/ts-book/docs/new/typescript-3.9.html">TypeScript 3.9</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/new/typescript-3.8.html">TypeScript 3.8</a><!----></li><li><a class="route-link" href="/git/ts-book/docs/new/typescript-3.7.html">TypeScript 3.7</a><!----></li><!--]--></ul></li><!--]--></ul></div><!--]--><!--]--></div></div></div></div><!--]--></nav><main class="main" data-v-dbf77475><!--[--><div class="doc-mian" data-v-87e45dc4 data-v-f65da650><div class="content-box doc-header" data-v-f65da650 data-v-b7100708 data-v-ed3e2012><!----><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><h1 class="doc-h-h1" data-v-b7100708>类型兼容性</h1><p class="doc-h-p" data-v-b7100708>类型兼容性 类型兼容性用于确定一个类型是否能赋值给其他类型。 如 string 类型与 number 类型不兼容： 安全性 TypeScript 类型系统设计比较方便，它允许你有一些不正确的行为。例如：任何类型都能被赋值给 any，这意味着告诉编译器你可以做任何你想做的事情： 结构化 TypeScript 对象是一种结构类型，这意味着只要结构匹配，名称...</p><div style="height:0.1rem;" data-v-b7100708></div><!--]--></div></div></div><div class="content-box doc-box doc-content" data-v-f65da650 data-v-79ce0c21 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><div class="doc-header" data-v-79ce0c21><div class="h-left" data-v-79ce0c21><svg fill="currentColor" t="1716534513061" class="icon calender-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1518" width="200" height="200" data-v-79ce0c21><path d="M902.095238 438.857143v390.095238a73.142857 73.142857 0 0 1-73.142857 73.142857H195.047619a73.142857 73.142857 0 0 1-73.142857-73.142857V438.857143h780.190476z m-512 219.428571h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m-365.714286-146.285714h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857z m182.857143 0h-121.904762v73.142857h121.904762v-73.142857zM195.047619 170.666667h73.142857v121.904762h158.476191V170.666667H609.52381v121.904762h158.47619V170.666667H828.952381a73.142857 73.142857 0 0 1 73.142857 73.142857v121.904762H121.904762v-121.904762a73.142857 73.142857 0 0 1 73.142857-73.142857z m529.212952-48.761905v121.904762h-73.142857V121.904762h73.142857zM380.050286 121.904762v121.904762h-73.142857V121.904762h73.142857z" p-id="1519"></path></svg><span class="calender-t" data-v-79ce0c21>2020-12-27 9:13</span></div><a href="/edit-on-github/?edit=https%3A%2F%2Fgithub.com%2Fjianjianai%2Ftypescript-book-chinese%2Fedit%2Fmaster%2Fdocs%2Ftypings%2FtypeCompatibility.md&amp;t=%E7%B1%BB%E5%9E%8B%E5%85%BC%E5%AE%B9%E6%80%A7" class="h-right" data-v-79ce0c21><!--[--><svg fill="currentColor" t="1716541843218" class="icon edit-i" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4659" width="200" height="200" data-v-79ce0c21><path d="M652.4 156.6125a112.5 112.5 0 1 1 155.925 161.15625L731.375 394.71875 572.3 235.5875l79.5375-79.5375 0.5625 0.5625zM333.63125 792.40625v0.1125H174.5v-159.1875l358.03125-357.975 159.075 159.13125-357.975 357.91875zM62 849.5h900v112.5H62v-112.5z" fill="#262626" p-id="4660"></path></svg><!--]--></a></div><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><div class="markdown-body" data-v-79ce0c21><h1 id="类型兼容性" tabindex="-1"><a class="header-anchor" href="#类型兼容性"><span>类型兼容性</span></a></h1><p>类型兼容性用于确定一个类型是否能赋值给其他类型。</p><p>如 <code>string</code> 类型与 <code>number</code> 类型不兼容：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">let</span> str<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&#39;Hello&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> num<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">str <span class="token operator">=</span> num<span class="token punctuation">;</span> <span class="token comment">// Error: &#39;number&#39; 不能赋值给 &#39;string&#39;</span></span>
<span class="line">num <span class="token operator">=</span> str<span class="token punctuation">;</span> <span class="token comment">// Error: &#39;string&#39; 不能赋值给 &#39;number&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="安全性" tabindex="-1"><a class="header-anchor" href="#安全性"><span>安全性</span></a></h2><p>TypeScript 类型系统设计比较方便，它允许你有一些不正确的行为。例如：任何类型都能被赋值给 <code>any</code>，这意味着告诉编译器你可以做任何你想做的事情：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">let</span> foo<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span></span>
<span class="line">foo <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">foo<span class="token punctuation">.</span><span class="token function">toPrecision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h2 id="结构化" tabindex="-1"><a class="header-anchor" href="#结构化"><span>结构化</span></a></h2><p>TypeScript 对象是一种结构类型，这意味着只要结构匹配，名称也就无关紧要了：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">public</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> p<span class="token operator">:</span> Point<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// ok, 因为是结构化的类型</span></span>
<span class="line">p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2D</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>这允许你动态创建对象（就好像你在 <code>vanilla JS</code> 中使用一样），并且它如果能被推断，该对象仍然具有安全性。</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> point2D<span class="token operator">:</span> Point2D <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> point3D<span class="token operator">:</span> Point3D <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token number">20</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">iTakePoint2D</span><span class="token punctuation">(</span>point<span class="token operator">:</span> Point2D<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* do something */</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token function">iTakePoint2D</span><span class="token punctuation">(</span>point2D<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok, 完全匹配</span></span>
<span class="line"><span class="token function">iTakePoint2D</span><span class="token punctuation">(</span>point3D<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 额外的信息，没关系</span></span>
<span class="line"><span class="token function">iTakePoint2D</span><span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error: 没有 &#39;y&#39;</span></span>
<span class="line"></span></code></pre></div><h2 id="变体" tabindex="-1"><a class="header-anchor" href="#变体"><span>变体</span></a></h2><p>对类型兼容性来说，变体是一个利于理解和重要的概念。</p><p>对一个简单类型 <code>Base</code> 和 <code>Child</code> 来说，如果 <code>Child</code> 是 <code>Base</code> 的子类，<code>Child</code> 的实例能被赋值给 <code>Base</code> 类型的变量。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>这是多态性。</p></div><p>在由 <code>Base</code> 和 <code>Child</code> 组合的复杂类型的类型兼容性中，它取决于相同场景下的 <code>Base</code> 与 <code>Child</code> 的变体：</p><ul><li>协变（Covariant）：只在同一个方向；</li><li>逆变（Contravariant）：只在相反的方向；</li><li>双向协变（Bivariant）：包括同一个方向和不同方向；</li><li>不变（Invariant）：如果类型不完全相同，则它们是不兼容的。</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>对于存在完全可变数据的健全的类型系统（如 JavaScript），<code>Invariant</code> 是一个唯一的有效可选属性，但是如我们所讨论的，<em>便利性</em>迫使我们作出一些不是很安全的选择。</p></div><p>关于协变和逆变的更多内容，请参考：<a class="route-link" href="/tips/covarianceAndContravariance.html">协变与逆变</a>。</p><h2 id="函数" tabindex="-1"><a class="header-anchor" href="#函数"><span>函数</span></a></h2><p>当你在比较两个函数时，这有一些你需要考虑到的事情。</p><h3 id="返回类型" tabindex="-1"><a class="header-anchor" href="#返回类型"><span>返回类型</span></a></h3><p>协变（Covariant）：返回类型必须包含足够的数据。</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> iMakePoint2D <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Point2D <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> iMakePoint3D <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Point3D <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> z<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">iMakePoint2D <span class="token operator">=</span> iMakePoint3D<span class="token punctuation">;</span></span>
<span class="line">iMakePoint3D <span class="token operator">=</span> iMakePoint2D<span class="token punctuation">;</span> <span class="token comment">// ERROR: Point2D 不能赋值给 Point3D</span></span>
<span class="line"></span></code></pre></div><h3 id="参数数量" tabindex="-1"><a class="header-anchor" href="#参数数量"><span>参数数量</span></a></h3><p>更少的参数数量是好的（如：函数能够选择性的忽略一些多余的参数），但是你得保证有足够的参数被使用了：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">const</span> <span class="token function-variable function">iTakeSomethingAndPassItAnErr</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function-variable function">x</span><span class="token operator">:</span> <span class="token punctuation">(</span>err<span class="token operator">:</span> Error<span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">/* 做一些其他的 */</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token function">iTakeSomethingAndPassItAnErr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"><span class="token function">iTakeSomethingAndPassItAnErr</span><span class="token punctuation">(</span>err <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"><span class="token function">iTakeSomethingAndPassItAnErr</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Error: 参数类型 `(err: any, data: any, more: any) =&gt; null` 不能赋值给参数类型 `(err: Error, data: any) =&gt; void`</span></span>
<span class="line"><span class="token function">iTakeSomethingAndPassItAnErr</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> data<span class="token punctuation">,</span> more<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h3 id="可选的和-rest-参数" tabindex="-1"><a class="header-anchor" href="#可选的和-rest-参数"><span>可选的和 rest 参数</span></a></h3><p>可选的（预先确定的）和 Rest 参数（任何数量的参数）都是兼容的：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">let</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span>x<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">bas</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">foo <span class="token operator">=</span> bar <span class="token operator">=</span> bas<span class="token punctuation">;</span></span>
<span class="line">bas <span class="token operator">=</span> bar <span class="token operator">=</span> foo<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">Note</p><p>可选的（上例子中的 <code>bar</code>）与不可选的（上例子中的 <code>foo</code>）仅在选项为 <code>strictNullChecks</code> 为 <code>false</code> 时兼容。</p></div><h3 id="函数参数类型" tabindex="-1"><a class="header-anchor" href="#函数参数类型"><span>函数参数类型</span></a></h3><p>双向协变（Bivariant）：旨在支持常见的事件处理方案。</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token comment">// 事件等级</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span></span>
<span class="line">  timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">MouseEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">KeyEvent</span> <span class="token keyword">extends</span> <span class="token class-name">Event</span> <span class="token punctuation">{</span></span>
<span class="line">  keyCode<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 简单的事件监听</span></span>
<span class="line"><span class="token keyword">enum</span> EventType <span class="token punctuation">{</span></span>
<span class="line">  Mouse<span class="token punctuation">,</span></span>
<span class="line">  Keyboard</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">function</span> <span class="token function">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token operator">:</span> EventType<span class="token punctuation">,</span> <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token punctuation">(</span>n<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 不安全，但是有用，常见。函数参数的比较是双向协变。</span></span>
<span class="line"><span class="token function">addEventListener</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&#39;,&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 在安全情景下的一种不好方案</span></span>
<span class="line"><span class="token function">addEventListener</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MouseEvent<span class="token operator">&gt;</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&#39;,&#39;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>MouseEvent<span class="token operator">&gt;</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">addEventListener</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token operator">&lt;</span><span class="token punctuation">(</span>e<span class="token operator">:</span> Event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token operator">:</span> MouseEvent<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&#39;,&#39;</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 仍然不允许明确的错误，对完全不兼容的类型会强制检查</span></span>
<span class="line"><span class="token function">addEventListener</span><span class="token punctuation">(</span>EventType<span class="token punctuation">.</span>Mouse<span class="token punctuation">,</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>同样的，你也可以把 <code>Array&lt;Child&gt;</code> 赋值给 <code>Array&lt;Base&gt;</code> （协变），因为函数是兼容的。数组的协变需要所有的函数 <code>Array&lt;Child&gt;</code> 都能赋值给 <code>Array&lt;Base&gt;</code>，例如 <code>push(t: Child)</code> 能被赋值给 <code>push(t: Base)</code>，这都可以通过函数参数双向协变实现。</p><p>下面的代码对于其他语言的开发者来说，可能会感到很困惑，因为他们认为是有错误的，可是 Typescript 并不会报错：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point2D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">interface</span> <span class="token class-name">Point3D</span> <span class="token punctuation">{</span></span>
<span class="line">  x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">iTakePoint2D</span> <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token operator">:</span> Point2D<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">iTakePoint3D</span> <span class="token operator">=</span> <span class="token punctuation">(</span>point<span class="token operator">:</span> Point3D<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">iTakePoint3D <span class="token operator">=</span> iTakePoint2D<span class="token punctuation">;</span> <span class="token comment">// ok, 这是合理的</span></span>
<span class="line">iTakePoint2D <span class="token operator">=</span> iTakePoint3D<span class="token punctuation">;</span> <span class="token comment">// ok，为什么？</span></span>
<span class="line"></span></code></pre></div><h2 id="枚举" tabindex="-1"><a class="header-anchor" href="#枚举"><span>枚举</span></a></h2><ul><li>枚举与数字类型相互兼容</li></ul><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">enum</span> Status <span class="token punctuation">{</span></span>
<span class="line">  Ready<span class="token punctuation">,</span></span>
<span class="line">  Waiting</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> status <span class="token operator">=</span> Status<span class="token punctuation">.</span>Ready<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">status <span class="token operator">=</span> num<span class="token punctuation">;</span></span>
<span class="line">num <span class="token operator">=</span> status<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><ul><li>来自于不同枚举的枚举变量，被认为是不兼容的：</li></ul><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">enum</span> Status <span class="token punctuation">{</span></span>
<span class="line">  Ready<span class="token punctuation">,</span></span>
<span class="line">  Waiting</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">enum</span> Color <span class="token punctuation">{</span></span>
<span class="line">  Red<span class="token punctuation">,</span></span>
<span class="line">  Blue<span class="token punctuation">,</span></span>
<span class="line">  Green</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> status <span class="token operator">=</span> Status<span class="token punctuation">.</span>Ready<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> color <span class="token operator">=</span> Color<span class="token punctuation">.</span>Red<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">status <span class="token operator">=</span> color<span class="token punctuation">;</span> <span class="token comment">// Error</span></span>
<span class="line"></span></code></pre></div><h2 id="类" tabindex="-1"><a class="header-anchor" href="#类"><span>类</span></a></h2><ul><li>仅仅只有实例成员和方法会相比较，构造函数和静态成员不会被检查。</li></ul><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> numFeet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span></span>
<span class="line">  feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span>meters<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> a<span class="token operator">:</span> Animal<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> s<span class="token operator">:</span> Size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">a <span class="token operator">=</span> s<span class="token punctuation">;</span> <span class="token comment">// OK</span></span>
<span class="line">s <span class="token operator">=</span> a<span class="token punctuation">;</span> <span class="token comment">// OK</span></span>
<span class="line"></span></code></pre></div><ul><li>私有的和受保护的成员必须来自于相同的类。</li></ul><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">protected</span> feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> animal<span class="token operator">:</span> Animal<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> cat<span class="token operator">:</span> Cat<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">animal <span class="token operator">=</span> cat<span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line">cat <span class="token operator">=</span> animal<span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Size</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">protected</span> feet<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> size<span class="token operator">:</span> Size<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">animal <span class="token operator">=</span> size<span class="token punctuation">;</span> <span class="token comment">// ERROR</span></span>
<span class="line">size <span class="token operator">=</span> animal<span class="token punctuation">;</span> <span class="token comment">// ERROR</span></span>
<span class="line"></span></code></pre></div><h2 id="泛型" tabindex="-1"><a class="header-anchor" href="#泛型"><span>泛型</span></a></h2><p>TypeScript 类型系统基于变量的结构，仅当类型参数在被一个成员使用时，才会影响兼容性。如下例子中，<code>T</code> 对兼容性没有影响：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Empty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> x<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> y<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"></span></code></pre></div><p>当 <code>T</code> 被成员使用时，它将在实例化泛型后影响兼容性：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">interface</span> <span class="token class-name">Empty<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  data<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> x<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> y<span class="token operator">:</span> Empty<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">x <span class="token operator">=</span> y<span class="token punctuation">;</span> <span class="token comment">// Error</span></span>
<span class="line"></span></code></pre></div><p>如果尚未实例化泛型参数，则在检查兼容性之前将其替换为 <code>any</code>：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">let</span> <span class="token function-variable function">identity</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>y<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">U</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">// ...</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">identity <span class="token operator">=</span> reverse<span class="token punctuation">;</span> <span class="token comment">// ok, 因为 `(x: any) =&gt; any` 匹配 `(y: any) =&gt; any`</span></span>
<span class="line"></span></code></pre></div><p>类中的泛型兼容性与前文所提及一致：</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">List<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">add</span><span class="token punctuation">(</span>val<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// ..</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> animals <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List<span class="token operator">&lt;</span>Animal<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">animals<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line">animals<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> cats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List<span class="token operator">&lt;</span>Cat<span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">cats<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Error</span></span>
<span class="line">cats<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line"></span></code></pre></div><h2 id="脚注-不变性-invariance" tabindex="-1"><a class="header-anchor" href="#脚注-不变性-invariance"><span>脚注：不变性（Invariance）</span></a></h2><p>我们说过，不变性可能是唯一一个听起来合理的选项，这里有一个关于 <code>contra</code> 和 <code>co</code> 的变体，被认为对数组是不安全的。</p><div class="language-typescript" data-highlighter="prismjs" data-ext="ts" data-title="ts"><pre class="language-typescript"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;cat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&#39;animal&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> cat <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token string">&#39;cat&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 多态</span></span>
<span class="line"><span class="token comment">// Animal &lt;= Cat</span></span>
<span class="line"></span>
<span class="line">animal <span class="token operator">=</span> cat<span class="token punctuation">;</span> <span class="token comment">// ok</span></span>
<span class="line">cat <span class="token operator">=</span> animal<span class="token punctuation">;</span> <span class="token comment">// ERROR: cat 继承于 animal</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 演示每个数组形式</span></span>
<span class="line"><span class="token keyword">let</span> animalArr<span class="token operator">:</span> Animal<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>animal<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">let</span> catArr<span class="token operator">:</span> Cat<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>cat<span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 明显的坏处，逆变</span></span>
<span class="line"><span class="token comment">// Animal &lt;= Cat</span></span>
<span class="line"><span class="token comment">// Animal[] &gt;= Cat[]</span></span>
<span class="line">catArr <span class="token operator">=</span> animalArr<span class="token punctuation">;</span> <span class="token comment">// ok, 如有有逆变</span></span>
<span class="line">catArr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 允许，但是会在运行时报错</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 另外一个坏处，协变</span></span>
<span class="line"><span class="token comment">// Animal &lt;= Cat</span></span>
<span class="line"><span class="token comment">// Animal[] &lt;= Cat[]</span></span>
<span class="line">animalArr <span class="token operator">=</span> catArr<span class="token punctuation">;</span> <span class="token comment">// ok，协变</span></span>
<span class="line"></span>
<span class="line">animalArr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">&#39;another animal&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 仅仅是 push 一个 animal 至 carArr 里</span></span>
<span class="line">catArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span><span class="token function">meow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 允许，但是会在运行时报错。</span></span>
<span class="line"></span></code></pre></div></div><!--]--></div></div></div></div><div class="content-box comment-box comment" data-v-87e45dc4 data-v-33d62412 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><span style="font-weight:bolder;" data-v-33d62412>评论区</span><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><!----><!--]--></div></div></div><!--]--></main><aside class="aside" data-v-dbf77475><!--[--><div class="aside" data-v-87e45dc4 data-v-09d135a9><div class="content-box aside-befr" data-v-09d135a9 data-v-3d2fc059 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><span style="font-weight:bolder;" data-v-3d2fc059>文章贡献者</span><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><div class="contributors" data-v-3d2fc059><!--[--><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>j</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>jkchao</span><span class="c-l1-email" data-v-3d2fc059>jkchaom@gmail.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>11次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>l</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>lxvc</span><span class="c-l1-email" data-v-3d2fc059>403381161@qq.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>2次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>C</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>Charles</span><span class="c-l1-email" data-v-3d2fc059>15555602203@163.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>I</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>Ininit</span><span class="c-l1-email" data-v-3d2fc059>meininit@gmail.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>R</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>Rem486</span><span class="c-l1-email" data-v-3d2fc059>362339094@qq.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>Y</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>Yates</span><span class="c-l1-email" data-v-3d2fc059>41691152+DuYueYu@users.noreply.github.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>d</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>dingkang</span><span class="c-l1-email" data-v-3d2fc059>947110922@qq.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><a class="contributor" target="_blank" data-v-3d2fc059><div class="contributor-img" data-v-3d2fc059><div class="contributor-img-div" data-v-3d2fc059>y</div></div><div class="contributor-info" data-v-3d2fc059><div class="c-line1" data-v-3d2fc059><span class="c-l1-name" data-v-3d2fc059>yuhengshen</span><span class="c-l1-email" data-v-3d2fc059>yuhengshen@qq.com</span></div><div class="c-line2" data-v-3d2fc059><svg fill="currentColor" t="1716539022955" class="icon c-l2-img" viewbox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3662" width="200" height="200" data-v-3d2fc059><path d="M554.453333 128c-212.266667 0-383.786667 171.946667-383.786667 384l-128 0 166.186667 166.186667 2.986667 6.186667 172.16-172.373333-128 0c0-164.906667 133.76-298.666667 298.666667-298.666667s298.666667 133.76 298.666667 298.666667-133.76 298.666667-298.666667 298.666667c-82.56 0-157.013333-33.706667-210.986667-87.68l-60.373333 60.373333c69.333333 69.546667 165.12 112.64 271.146667 112.64 212.266667 0 384.213333-171.946667 384.213333-384s-171.946667-384-384.213333-384zM512 341.333333l0 213.333333 182.613333 108.373333 30.72-51.84-149.333333-88.533333 0-181.333333-64 0z" opacity="0.899999976158142" p-id="3663"></path></svg><span class="c-l2-commits" data-v-3d2fc059>1次提交</span></div></div></a><!--]--><a href="/edit-on-github/?edit=https%3A%2F%2Fgithub.com%2Fjianjianai%2Ftypescript-book-chinese%2Fedit%2Fmaster%2Fdocs%2Ftypings%2FtypeCompatibility.md&amp;t=%E7%B1%BB%E5%9E%8B%E5%85%BC%E5%AE%B9%E6%80%A7" class="to-edit" data-v-3d2fc059><!--[-->+ 成为贡献者<!--]--></a></div><!--]--></div></div></div><div class="content-box sticky-content-box" data-v-09d135a9 data-v-8273a297 data-v-ed3e2012><div class="box-header" data-v-ed3e2012><!--[--><!--[--><span style="font-weight:bolder;">页面导航</span><!--]--><!--]--></div><div class="box-main" data-v-ed3e2012><div class="box-main-padding" data-v-ed3e2012><!--[--><!--[--><nav class="vuepress-toc aside-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#安全性" arialabel="安全性">安全性</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#结构化" arialabel="结构化">结构化</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#变体" arialabel="变体">变体</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#函数" arialabel="函数">函数</a><!--[--><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#返回类型" arialabel="返回类型">返回类型</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#参数数量" arialabel="参数数量">参数数量</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#可选的和-rest-参数" arialabel="可选的和 rest 参数">可选的和 rest 参数</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#函数参数类型" arialabel="函数参数类型">函数参数类型</a><!--[--><!--]--></li></ul><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#枚举" arialabel="枚举">枚举</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#类" arialabel="类">类</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#泛型" arialabel="泛型">泛型</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a class="route-link vuepress-toc-link" href="#脚注-不变性-invariance" arialabel="脚注：不变性（Invariance）">脚注：不变性（Invariance）</a><!--[--><!--]--></li></ul></nav><!--]--><!--]--></div></div></div></div><!--]--></aside></div><!--]--><footer class="footer" data-v-efc7c778><!--[--><div class="footer" data-v-87e45dc4 data-v-7fb9e336><div data-v-7fb9e336><img src="/assets/logo-BKj6Wk_c.svg" style="height:2rem;" data-v-7fb9e336></div><div data-v-7fb9e336><a href="/" class="" data-v-7fb9e336>神奇小破站 jjaw.cn</a></div><div data-v-7fb9e336>图标真是随手画的</div><div data-v-7fb9e336><a href="https://icp.gov.moe/?keyword=20250060" target="_blank" data-v-7fb9e336>萌ICP备20250060号</a></div></div><!--]--></footer></div></div><!--[--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-BvbaUvch.js" defer></script>
  </body>
</html>
